#!/usr/bin/env node
import allowedOptions from './../lib/options.js';
import { CloudflareCli } from './../index.js';
import { ConfigReader } from './../lib/configReader.js';
import minimist from 'minimist';
let argv = minimist(process.argv.slice(2), allowedOptions);
let configFile = argv.config || '~/.cfcli.yml';
let config = {};
try {
  config = new ConfigReader(configFile).readConfig(argv.account);
} catch (error) {
  console.log(error.message);
  process.exit(1);
}
let params = { ...config, ...argv };
let cli = new CloudflareCli(params);
cli.runCommand(argv._[0], params);
